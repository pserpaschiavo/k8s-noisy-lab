[2025-05-09 03:55:37] Iniciando experimento: cpu-noisy
[2025-05-09 03:55:37] Log sendo salvo em: /home/phil/Projects/k8s-noisy-lab/results/2025-05-09/03-55-37/cpu-noisy/experiment.log
[2025-05-09 03:55:37] Verificando pr√©-requisitos...
[2025-05-09 03:55:37] M√©tricas ser√£o salvas em: /home/phil/Projects/k8s-noisy-lab/results/2025-05-09/03-55-37/cpu-noisy
[2025-05-09 03:55:37] Validando recursos do cluster...
[0;35m==========================================[0m
[0;35m     VERIFICA√á√ÉO PR√â-EXPERIMENTO         [0m
[0;35m==========================================[0m
[0;35mVerificando conectividade com o cluster...[0m
[0;32m‚úì Conex√£o com o cluster estabelecida com sucesso[0m
[0;35mVerificando estado dos n√≥s do cluster...[0m
[0;32m‚úì O cluster possui 1 n√≥s dispon√≠veis[0m
[0;35mVerificando recursos dispon√≠veis no cluster...[0m
CPU: [0;35m11600[0m cores
Mem√≥ria: [0;35m30.73[0m GB
[0;32m‚úì Recursos do cluster s√£o suficientes para o experimento[0m
[0;35mVerificando namespaces necess√°rias...[0m
[0;32m‚úì Namespace 'tenant-a' encontrada[0m
[0;32m‚úì Namespace 'tenant-b' encontrada[0m
[0;32m‚úì Namespace 'tenant-c' encontrada[0m
[0;32m‚úì Namespace 'monitoring' encontrada[0m
[0;35mVerificando disponibilidade do Prometheus...[0m
[0;32m‚úì Prometheus est√° rodando e pronto[0m
[0;35mVerificando disponibilidade das m√©tricas essenciais...[0m
[0;32m‚úì M√©trica 'container_cpu_usage_seconds_total' dispon√≠vel[0m
[0;32m‚úì M√©trica 'container_memory_working_set_bytes' dispon√≠vel[0m
[0;32m‚úì M√©trica 'container_network_receive_bytes_total' dispon√≠vel[0m
[0;32m‚úì M√©trica 'container_network_transmit_bytes_total' dispon√≠vel[0m
[0;32m‚úì M√©trica 'container_cpu_cfs_throttled_periods_total' dispon√≠vel[0m
[0;32m‚úì M√©trica 'container_cpu_cfs_periods_total' dispon√≠vel[0m
[0;35mVerificando permiss√µes necess√°rias...[0m
[0;35mVerificando CRDs do Prometheus Operator...[0m
[0;32m‚úì CRD 'servicemonitors.monitoring.coreos.com' encontrada[0m
[0;32m‚úì CRD 'prometheusrules.monitoring.coreos.com' encontrada[0m
[0;35m==========================================[0m
[0;32m‚úì Cluster validado com sucesso para o experimento[0m
[0;35m==========================================[0m

Informa√ß√µes adicionais:
- O experimento utiliza m√©tricas da cAdvisor integradas ao kubelet
- As queries do Prometheus usam principalmente m√©tricas rate() com 1m de janela
- Os workloads s√£o distribu√≠dos em 3 tenants para simular o cen√°rio de noisy neighbour

Recomenda√ß√µes finais:
- Certifique-se de ter pelo menos 15-20% de recursos livres al√©m dos solicitados
- Se estiver usando Minikube, use a op√ß√£o '--driver=docker' para melhor desempenho
- Verifique se n√£o h√° outros processos consumindo recursos significativos nos n√≥s
[2025-05-09 03:55:41] Criando namespaces...
resourcequota/tenant-a-quota configured
resourcequota/tenant-b-quota configured
resourcequota/tenant-c-quota configured
namespace/tenant-a unchanged
namespace/tenant-b unchanged
namespace/tenant-c unchanged
[2025-05-09 03:55:42] Aplicando resource quotas...
resourcequota/tenant-a-quota configured
resourcequota/tenant-b-quota configured
resourcequota/tenant-c-quota configured
[2025-05-09 03:55:42] Stack de observabilidade j√° instalada.
[2025-05-09 03:55:42] Aguardando inicializa√ß√£o do Prometheus...
Error from server (NotFound): deployments.apps "prometheus-kube-prometheus-prometheus" not found
[2025-05-09 03:55:42] N√£o foi poss√≠vel detectar o deployment do Prometheus. Continuando mesmo assim...
[2025-05-09 03:55:42] Configurando port-forward para o Prometheus...
Unable to listen on port 9090: Listeners failed to create with the following errors: [unable to create listener: Error listen tcp4 127.0.0.1:9090: bind: address already in use unable to create listener: Error listen tcp6 [::1]:9090: bind: address already in use]
error: unable to listen on any of the requested ports: [{9090 9090}]
[2025-05-09 03:55:47] Port-forward para Prometheus configurado com sucesso
[2025-05-09 03:55:47] ======= IN√çCIO DO EXPERIMENTO: cpu-noisy =======
[2025-05-09 03:55:47] Data: 2025/05/09, Hora: 03:55:37
[2025-05-09 03:55:47] N√∫mero de rounds: 1
[2025-05-09 03:55:47] Dura√ß√£o das fases: Baseline=60s, Ataque=60s, Recupera√ß√£o=60s
[2025-05-09 03:55:47] ===== ROUND 1/1 =====
[2025-05-09 03:55:47] === Fase 1: BASELINE ===
[2025-05-09 03:55:47] Limpando workloads anteriores...
deployment.apps "cpu-stress" deleted
deployment.apps "memory-stress" deleted
deployment.apps "iperf-client" deleted
deployment.apps "cpu-stress" deleted
deployment.apps "memory-stress" deleted
deployment.apps "iperf-server" deleted
service "iperf-server" deleted
[2025-05-09 03:55:57] Iniciando fase: baseline (dura√ß√£o m√°xima: 60s)
[2025-05-09 03:55:57] Implantando tenant-a (refer√™ncia)...
deployment.apps/cpu-stress created
deployment.apps/memory-stress created
deployment.apps/iperf-server created
service/iperf-server created
[2025-05-09 03:55:57] Aguardando inicializa√ß√£o dos servi√ßos do tenant-a...
deployment.apps/iperf-server condition met
[2025-05-09 03:56:13] Implantando tenant-c (v√≠tima)...
deployment.apps/cpu-stress created
deployment.apps/memory-stress created
deployment.apps/iperf-client created
[2025-05-09 03:56:13] Aguardando inicializa√ß√£o dos workloads do tenant-c...
[2025-05-09 03:56:28] Coletando m√©tricas para a fase: baseline (Round 1)...
Traceback (most recent call last):
  File "<string>", line 4, in <module>
    from prometheus_metrics import main
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/main.py", line 12, in <module>
    from prometheus_metrics.processors.data_processor import MetricsDataProcessor
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/processors/data_processor.py", line 5, in <module>
    import pandas as pd
ModuleNotFoundError: No module named 'pandas'
[2025-05-09 03:56:28] ‚ö†Ô∏è Aviso: Problema na coleta de m√©tricas. Continuando o experimento...
[2025-05-09 03:56:28] Coletando informa√ß√µes do cluster...
error: Metrics API not available
error: Metrics API not available
[2025-05-09 03:56:29] Capturando m√©tricas via API do Prometheus...
[2025-05-09 03:57:27] ‚ö†Ô∏è Timeout atingido para fase baseline. For√ßando continua√ß√£o...
[2025-05-09 03:57:27] Fase baseline conclu√≠da
[2025-05-09 03:57:27] === Fase 2: ATAQUES ===
[2025-05-09 03:57:27] Iniciando fase: attack (dura√ß√£o m√°xima: 60s)
[2025-05-09 03:57:27] Implantando tenant-b (noisy neighbour)...
deployment.apps/cpu-stress created
deployment.apps/memory-stress created
deployment.apps/iperf-client created
[2025-05-09 03:57:28] Aguardando inicializa√ß√£o dos workloads do tenant-b...
[2025-05-09 03:57:43] Coletando m√©tricas para a fase: attack-start (Round 1)...
Traceback (most recent call last):
  File "<string>", line 4, in <module>
    from prometheus_metrics import main
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/main.py", line 12, in <module>
    from prometheus_metrics.processors.data_processor import MetricsDataProcessor
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/processors/data_processor.py", line 5, in <module>
    import pandas as pd
ModuleNotFoundError: No module named 'pandas'
[2025-05-09 03:57:43] ‚ö†Ô∏è Aviso: Problema na coleta de m√©tricas. Continuando o experimento...
[2025-05-09 03:57:43] Coletando informa√ß√µes do cluster...
error: Metrics API not available
error: Metrics API not available
[2025-05-09 03:57:43] Capturando m√©tricas via API do Prometheus...
[2025-05-09 03:58:43] Coletando m√©tricas para a fase: attack-end (Round 1)...
Traceback (most recent call last):
  File "<string>", line 4, in <module>
    from prometheus_metrics import main
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/main.py", line 12, in <module>
    from prometheus_metrics.processors.data_processor import MetricsDataProcessor
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/processors/data_processor.py", line 5, in <module>
    import pandas as pd
ModuleNotFoundError: No module named 'pandas'
[2025-05-09 03:58:43] ‚ö†Ô∏è Aviso: Problema na coleta de m√©tricas. Continuando o experimento...
[2025-05-09 03:58:43] Coletando informa√ß√µes do cluster...
error: Metrics API not available
error: Metrics API not available
[2025-05-09 03:58:43] Capturando m√©tricas via API do Prometheus...
[2025-05-09 03:58:44] Fase attack conclu√≠da
[2025-05-09 03:58:44] === Fase 3: RECUPERA√á√ÉO ===
[2025-05-09 03:58:44] Iniciando fase: recovery (dura√ß√£o m√°xima: 60s)
[2025-05-09 03:58:44] Removendo tenant-b (noisy neighbour)...
deployment.apps "cpu-stress" deleted
deployment.apps "memory-stress" deleted
deployment.apps "iperf-client" deleted
[2025-05-09 03:58:44] Aguardando remo√ß√£o completa do tenant-b...
[2025-05-09 03:58:59] Coletando m√©tricas para a fase: recovery-start (Round 1)...
Traceback (most recent call last):
  File "<string>", line 4, in <module>
    from prometheus_metrics import main
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/main.py", line 12, in <module>
    from prometheus_metrics.processors.data_processor import MetricsDataProcessor
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/processors/data_processor.py", line 5, in <module>
    import pandas as pd
ModuleNotFoundError: No module named 'pandas'
[2025-05-09 03:58:59] ‚ö†Ô∏è Aviso: Problema na coleta de m√©tricas. Continuando o experimento...
[2025-05-09 03:58:59] Coletando informa√ß√µes do cluster...
error: Metrics API not available
error: Metrics API not available
[2025-05-09 03:58:59] Capturando m√©tricas via API do Prometheus...
[2025-05-09 03:59:59] Coletando m√©tricas para a fase: recovery-end (Round 1)...
Traceback (most recent call last):
  File "<string>", line 4, in <module>
    from prometheus_metrics import main
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/main.py", line 12, in <module>
    from prometheus_metrics.processors.data_processor import MetricsDataProcessor
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/processors/data_processor.py", line 5, in <module>
    import pandas as pd
ModuleNotFoundError: No module named 'pandas'
[2025-05-09 03:59:59] ‚ö†Ô∏è Aviso: Problema na coleta de m√©tricas. Continuando o experimento...
[2025-05-09 03:59:59] Coletando informa√ß√µes do cluster...
error: Metrics API not available
error: Metrics API not available
[2025-05-09 03:59:59] Capturando m√©tricas via API do Prometheus...
[2025-05-09 04:00:00] Fase recovery conclu√≠da
[2025-05-09 04:00:00] Round 1/1 conclu√≠do com sucesso!
[2025-05-09 04:00:00] Coletando m√©tricas para a fase: final (Round all)...
Traceback (most recent call last):
  File "<string>", line 4, in <module>
    from prometheus_metrics import main
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/main.py", line 12, in <module>
    from prometheus_metrics.processors.data_processor import MetricsDataProcessor
  File "/home/phil/Projects/k8s-noisy-lab/prometheus_metrics/processors/data_processor.py", line 5, in <module>
    import pandas as pd
ModuleNotFoundError: No module named 'pandas'
[2025-05-09 04:00:00] ‚ö†Ô∏è Aviso: Problema na coleta de m√©tricas. Continuando o experimento...
[2025-05-09 04:00:00] Coletando informa√ß√µes do cluster...
error: Metrics API not available
error: Metrics API not available
[2025-05-09 04:00:00] Capturando m√©tricas via API do Prometheus...
[2025-05-09 04:00:00] Interrompendo port-forward do Prometheus...
[2025-05-09 04:00:00] ======= EXPERIMENTO CONCLU√çDO =======
[2025-05-09 04:00:00] Data/hora de in√≠cio: 2025/05/09 03:55:37
[2025-05-09 04:00:00] Data/hora de t√©rmino: 2025/05/09 04:00:00
[2025-05-09 04:00:00] Dura√ß√£o total: 253 segundos (4 minutos)
[2025-05-09 04:00:00] M√©tricas e logs salvos em: /home/phil/Projects/k8s-noisy-lab/results/2025-05-09/03-55-37/cpu-noisy
[2025-05-09 04:00:00] Para visualizar os resultados no Grafana:
[2025-05-09 04:00:00] kubectl -n monitoring port-forward svc/prometheus-grafana 3000:80
[2025-05-09 04:00:00] Abra seu navegador em http://localhost:3000 (usu√°rio: admin, senha: admin)
